<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="wilco_report_invoice_document_inherit" inherit_id="account.report_invoice_document">
         <xpath expr="//div[@id='partner_vat_address_not_same_as_shipping']" position="before">
            <div t-field="o.partner_id"
                 t-options='{"widget": "contact", "fields": ["phone", "email"], "no_marker": True, "phone_icons": True}' />
            <div t-if="o.wilco_contact_info"><span>Attn: </span><span t-field="o.wilco_contact_info"/></div>
        </xpath>
        <xpath expr="//div[@id='partner_vat_address_same_as_shipping']" position="before">
            <div t-field="o.partner_id"
                 t-options='{"widget": "contact", "fields": ["phone", "email"], "no_marker": True, "phone_icons": True}' />
            <div t-if="o.wilco_contact_info"><span>Attn: </span><span t-field="o.wilco_contact_info"/></div>
        </xpath>
        <xpath expr="//div[@id='partner_vat_no_shipping']" position="before">
            <div t-field="o.partner_id"
                 t-options='{"widget": "contact", "fields": ["phone", "email"], "no_marker": True, "phone_icons": True}' />
            <div t-if="o.wilco_contact_info"><span>Attn: </span><span t-field="o.wilco_contact_info"/></div>
        </xpath>
        <xpath expr="//div[@name='invoice_date']/p[@t-field='o.invoice_date']" position="replace">
            <p class="m-0" t-field="o.invoice_date" t-options='{"widget": "date"}'/>
        </xpath>
        <xpath expr="//div[@name='due_date']/p[@t-field='o.invoice_date_due']" position="replace">
            <p class="m-0" t-field="o.invoice_date_due" t-options='{"widget": "date"}'/>
        </xpath>
        <xpath expr="//div[@name='origin']" position="replace">
            <div class="col-auto col-3 mw-100 mb-2" t-if="False" name="origin">
                <strong>Order:</strong>
                <p class="m-0" t-field="o.invoice_origin"/>
            </div>
        </xpath>
<!--        <xpath expr="//div[@name='origin']" position="after">-->
<!--            <div class="col-auto col-3 mw-100 mb-2" t-if="o.wilco_our_ref" name="wilco_our_ref">-->
<!--                <strong>Our Reference:</strong>-->
<!--                <p class="m-0" t-field="o.wilco_our_ref"/>-->
<!--            </div>-->
<!--        </xpath>-->
        <xpath expr="//div[@name='customer_code']" position="replace">
            <div class="col-auto col-3 mw-100 mb-2" t-if="False" name="customer_code">
                <t t-if="o.move_type in ('out_invoice','out_refund','out_receipt')">
                    <strong>Customer Code:</strong>
                </t>
                <t t-if="o.move_type in ('in_invoice','in_refund')">
                    <strong>Vendor Code:</strong>
                </t>
                <p class="m-0" t-field="o.partner_id.ref"/>
            </div>
        </xpath>
        <xpath expr="//div[@id='informations']" position="after">
            <div id="informations" class="row mt-4 mb-4">
                <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin">
                    <strong>Order:</strong>
                    <p class="m-0" t-field="o.invoice_origin"/>
                </div>
                <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.ref" name="wilco_company_code">
                    <t t-if="o.move_type in ('out_invoice','out_refund','out_receipt')">
                        <strong>Customer Code:</strong>
                    </t>
                    <t t-if="o.move_type in ('in_invoice','in_refund')">
                        <strong>Vendor Code:</strong>
                    </t>
                    <p class="m-0" t-field="o.partner_id.ref"/>
                </div>
                <div class="col-auto col-3 mw-100 mb-2" t-if="o.wilco_our_ref" name="wilco_our_ref">
                    <strong>Our Reference:</strong>
                    <p class="m-0" t-field="o.wilco_our_ref"/>
                </div>
            </div>
        </xpath>
        <xpath expr="//th[@name='th_taxes']" position="replace">
            <!--<th name="th_taxes" t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Taxes</span></th>-->
        </xpath>
        <xpath expr="//td[@name='td_taxes']" position="replace">
            <!--<td name='td_taxes't-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
            </td>-->
        </xpath>
        <xpath expr="//p[@name='payment_communication']" position="before">
            <t t-set="wilco_show_document_revision" t-value="True"/>
            <t t-set="wilco_revision_no" t-value="o.wilco_revision_no if o.wilco_revision_no else 0"/>
            <t t-set="wilco_revision_date" t-value="o.wilco_revision_date if o.wilco_revision_no else o.invoice_date"/>
        </xpath>
        <xpath expr="//th[@name='th_description']" position="before">
            <th name="wilco_th_line_ref" class="text-start">Item</th>
        </xpath>
        <xpath expr="//td[@name='account_invoice_line_name']" position="before">
            <td name="wilco_td_line_ref"><span t-field="line.wilco_line_ref"/></td>
        </xpath>
        <xpath expr="//th[@name='th_priceunit']" position="replace">
            <th name="th_priceunit" t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>Unit Price</span><br/>(<span t-field="o.currency_id.name"/>)</th>
        </xpath>
        <xpath expr="//th[@name='th_subtotal']" position="replace">
            <th name="th_subtotal" class="text-end">
                <span groups="account.group_show_line_subtotals_tax_excluded">Amount<br/>(<span t-field="o.currency_id.name"/>)</span>
                <span groups="account.group_show_line_subtotals_tax_included">Total Price<br/>(<span t-field="o.currency_id.name"/>)</span>
            </th>
        </xpath>
        <xpath expr="//th[@name='th_description']" position="replace">
            <th name="th_description" class="text-start" style="width:450px;">Description</th>
        </xpath>
    </template>
</odoo>
